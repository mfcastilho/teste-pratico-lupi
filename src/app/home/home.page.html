<ion-header>
  <ion-toolbar>
    <ion-title>
      <img
        class="header-logo"
        src="../../assets/images/Logo-Lupi-removebg-preview.png"
        alt="Logo"
      />
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <!-- <form (ngSubmit)="addOrder()" #orderForm="ngForm">
    <ion-item>
      <ion-label position="floating">Nome do Cliente</ion-label>
      <ion-input type="text" [(ngModel)]="newOrder.customerName" name="customerName" required></ion-input>
    </ion-item>
    <ion-item>
      <ion-label position="floating">Descrição</ion-label>
      <ion-textarea [(ngModel)]="newOrder.description" name="description"></ion-textarea>
    </ion-item>
    <ion-button expand="block" type="submit" [disabled]="orderForm.invalid">
      Adicionar Pedido
    </ion-button>
  </form> -->

  <!-- <app-order-form (orderAdded)="addOrder($event)"></app-order-form> -->

  <ion-button expand="block" [routerLink]="'/order-form'">
    Cadastrar Novo Pedido
  </ion-button>


  <ion-grid>
    <ion-row>
      <ion-col
        size="12"
        size-md="6"
        size-lg="4"
        class="column"
        (dragover)="onDragOver($event)"
        (drop)="onDrop($event, 'Novo')"
      >
        <h2 class="column__title">Novo</h2>

        <ion-list>
          <ion-item *ngIf="newOrders.length === 0" lines="none">
            <ion-label><em>Nenhum pedido em Novo</em></ion-label>
          </ion-item>
          <ion-item *ngFor="let order of newOrders" class="card" [draggable]="true" (dragstart)="onDragStart($event, order)">
            <ion-label>
              <p><strong>Nome do cliente: </strong>{{ order.customerName }}</p>
              <p><strong>Descrição do pedido: </strong>{{ order.description }}</p>
              <p><strong>Data/Horário de criação: </strong>{{ formatDate(order.createdAt) }}</p>
              <ion-button (click)="updateStatus(order, 'Em Andamento')">Mover para Em Andamento</ion-button>
            </ion-label>
          </ion-item>
        </ion-list>


      </ion-col>

      <!-- Coluna: Em Andamento -->
      <ion-col
        size="12"
        size-md="6"
        size-lg="4"
        class="column"
        (dragover)="onDragOver($event)"
        (drop)="onDrop($event, 'Em Andamento')"
      >
        <h2 class="column__title">Em Andamento</h2>

        <ion-list>
          <ion-item *ngIf="inProgressOrders.length === 0" lines="none">
            <ion-label><em>Nenhum pedido em andamento</em></ion-label>
          </ion-item>
          <ion-item
            *ngFor="let order of inProgressOrders"
            class="card"
            [draggable]="true"
            (dragstart)="onDragStart($event, order)"
          >
            <ion-label>
              <p><strong>Nome do cliente: </strong>{{ order.customerName }}</p>
              <p>
                <strong>Descrição do pedido: </strong>{{ order.description }}
              </p>
              <p>
                <strong>Data/Horário de criação: </strong>{{
                formatDate(order.createdAt) }}
              </p>
              <ion-button (click)="updateStatus(order, 'Concluído')"
                >Mover para Concluído</ion-button
              >
            </ion-label>
          </ion-item>
        </ion-list>


      </ion-col>

      <!-- Coluna: Concluído -->
      <ion-col
        size="12"
        size-md="6"
        size-lg="4"
        class="column"
        (dragover)="onDragOver($event)"
        (drop)="onDrop($event, 'Concluído')"
      >
        <h2 class="column__title">Concluído</h2>

        <ion-list>
          <ion-item *ngIf="completedOrders.length === 0" lines="none">
            <ion-label><em>Nenhum pedido concluído</em></ion-label>
          </ion-item>
          <ion-item
            *ngFor="let order of completedOrders"
            class="card"
            [draggable]="true"
            (dragstart)="onDragStart($event, order)"
          >
            <ion-label>
              <p><strong>Nome do cliente: </strong>{{ order.customerName }}</p>
              <p>
                <strong>Descrição do pedido: </strong>{{ order.description }}
              </p>
              <p>
                <strong>Data/Horário de criação: </strong>{{
                formatDate(order.createdAt) }}
              </p>
            </ion-label>
          </ion-item>
        </ion-list>



      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
